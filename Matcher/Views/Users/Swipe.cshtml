@model List<Matcher.Models.User>
@using System.Collections
@using Matcher.DataAccess
@using Matcher.Models

@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="~/css/swipe.css" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;1,500&display=swap"
          rel="stylesheet" />
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" />
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <title>Swipe</title>
</head>
<body>
    @{
        VoVoContext _context = new VoVoContext();
        UserPhotosDAO userPhotosDAO = new UserPhotosDAO(_context);
    };
    <div class="container">
        <div class="side">
            <div class="header">
                <div class="avatar">
                    <img src="@userPhotosDAO.GetAvatarByUsrID(ViewBag.User.UserId)" alt="" />
                </div>
                <div class="title">@ViewBag.User.Name</div>
                <div class="d-flex">
                    <a class="nav-link text-white" asp-controller="Users" asp-action="Logout">Logout</a>
                </div>
            </div>
            <nav class="menu">
                <div class="nav nav-tabs mb-3" id="nav-tab" role="tablist">
                    <button class="nav-link" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Match</button>
                    <button class="nav-link active" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Message</button>
                </div>
            </nav>
            <div class="tab-content p-3 border bg-light" id="nav-tabContent">
                <div class="tab-pane fade" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                    <div class="row">
                        @foreach (var user in Model)
                        {
                            <div class="col-4">
                                <img src="@userPhotosDAO.GetAvatarByUsrID(user.UserId)" alt="avt" style="width: 70px; height: 70px;" />
                                <p>@user.Name</p>
                            </div>
                        }
                    </div>
                </div>
                <div class="tab-pane fade active show" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                    <div class="messages">
                        <div class="avatar">
                            <img src="https://randomuser.me/api/portraits/women/38.jpg" alt="" />
                        </div>
                        <div class="message">
                            <div class="user">Caroline</div>
                            <div class="text">Lorem ipsum dolor sit amet consectetur adipisicing</div>
                        </div>
                    </div>
                    <div class="messages">
                        <div class="avatar">
                            <img src="https://randomuser.me/api/portraits/women/39.jpg" alt="" />
                        </div>
                        <div class="message">
                            <div class="user">Caroline</div>
                            <div class="text">Lorem ipsum dolor sit amet consectetur adipisicing</div>
                        </div>
                    </div>
                    <div class="messages">
                        <div class="avatar">
                            <img src="https://randomuser.me/api/portraits/women/40.jpg" alt="" />
                        </div>
                        <div class="message">
                            <div class="user">Caroline</div>
                            <div class="text">Lorem ipsum dolor sit amet consectetur adipisicing</div>
                        </div>
                    </div>
                    <div class="messages">
                        <div class="avatar">
                            <img src="https://randomuser.me/api/portraits/women/41.jpg" alt="" />
                        </div>
                        <div class="message">
                            <div class="user">Caroline</div>
                            <div class="text">Lorem ipsum dolor sit amet consectetur adipisicing</div>
                        </div>
                    </div>
                    <div class="messages">
                        <div class="avatar">
                            <img src="https://randomuser.me/api/portraits/women/42.jpg" alt="" />
                        </div>
                        <div class="message">
                            <div class="user">Caroline</div>
                            <div class="text">Lorem ipsum dolor sit amet consectetur adipisicing</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content">
            @{
                User UserSwipe = ViewBag.UserSwipe;
            }
            @if (UserSwipe != null)
            {
                List<string> photosUser = userPhotosDAO.GetListPhotosByUsrID(UserSwipe.UserId);
                <div class="card">
                    <div class="user">

                        <div id="carouselExampleIndicators" class="carousel slide h-100">

                            <div class="carousel-indicators">
                                @for (int i = 1; i <= photosUser.Count(); i++)
                                {
                                    if (i == 1)
                                    {
                                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="@i-1" class="active" aria-current="true" aria-label="Slide @i"></button>
                                    }
                                    else
                                    {
                                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="@i-1" aria-label="Slide @i"></button>
                                    }
                                }
                            </div>
                            <div class="carousel-inner h-100">
                                @{
                                    int count = 1;
                                }
                                @foreach (string photo in photosUser)
                                {
                                    if (count == 1)
                                    {
                                        <div class="carousel-item h-100 active">
                                            <img src="@photo" class="d-block w-100 user" alt="photo">
                                        </div>
                                    }
                                    else
                                    {
                                        <div class="carousel-item h-100">
                                            <img src="@photo" class="d-block w-100 user" alt="photo">
                                        </div>
                                    }
                                    count++;
                                }
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                        <div class="profile">
                            <div class="name">
                                @UserSwipe.Name <span>
                                    @(
                                        DateTime.Today.Year - UserSwipe.DateOfBirth?.Year
                                        )
                                </span>
                            </div>
                            <div class="local">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>@UserSwipe.Description</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="buttons">
                    <div class="no">
                        <i class="fas fa-times"></i>
                    </div>
                    <div class="star">
                        <i class="fas fa-star fa"></i>
                    </div>
                    <div class="heart">
                        <i class="fas fa-heart"></i>
                    </div>
                </div>
            }
            else
            {
                <div class="card">
                    <h3>You have swiped everyone!</h3>
                </div>
            }
        </div>

    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
